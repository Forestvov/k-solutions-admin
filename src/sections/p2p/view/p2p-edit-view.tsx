import Stack from '@mui/material/Stack';
import Button from '@mui/material/Button';
import Container from '@mui/material/Container';

import { paths } from 'src/routes/paths';

import { useGetTransaction } from 'src/api/transaction';

import { useSettingsContext } from 'src/components/settings';
import CustomBreadcrumbs from 'src/components/custom-breadcrumbs';

import P2PEditForm from '../p2p-edit-form';
import { RouterLink } from '../../../routes/components';

interface Prop {
  id: string;
}

const P2PEditView = ({ id }: Prop) => {
  const settings = useSettingsContext();

  const { transaction, mutate } = useGetTransaction(id);

  return (
    <Container maxWidth={settings.themeStretch ? false : 'lg'}>
      <CustomBreadcrumbs
        heading="P2P"
        links={[{ name: 'Главная', href: paths.dashboard.root }, { name: 'P2P' }]}
        sx={{
          mb: { xs: 3, md: 5 },
        }}
        action={
          <Button component={RouterLink} href={paths.dashboard.p2p.list} variant="contained">
            Вернуться обратно
          </Button>
        }
      />

      {transaction.transactionStatus === 'Marked as paid' && (
        <Stack
          direction="row"
          spacing="20px"
          alignItems="center"
          sx={{
            color: '#006838',
            fontWeight: 600,
            marginBottom: '60px',
          }}
        >
          <img
            src="data:image/svg+xml,%3Csvg width='47' height='47' viewBox='0 0 47 47' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0_347_21611)'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M23.5234 0.0234375C36.502 0.0234375 47.0234 10.5455 47.0234 23.5234C47.0234 36.5014 36.5021 47.0234 23.5234 47.0234C10.5447 47.0234 0.0234375 36.5015 0.0234375 23.5234C0.0234375 10.5454 10.5455 0.0234375 23.5234 0.0234375ZM28.8094 8.75084C28.7377 8.71732 28.66 8.69837 28.5809 8.69509C28.5018 8.6918 28.4229 8.70425 28.3486 8.73171C28.2744 8.75917 28.2064 8.80109 28.1484 8.85505C28.0905 8.90901 28.0439 8.97393 28.0113 9.04604C27.9786 9.11816 27.9606 9.19603 27.9583 9.27516C27.956 9.35428 27.9694 9.43307 27.9978 9.50697C28.0262 9.58087 28.0689 9.6484 28.1236 9.70565C28.1782 9.76289 28.2437 9.80872 28.3162 9.84047C30.368 10.7682 32.1096 12.2667 33.333 14.1571C34.5565 16.0475 35.2103 18.25 35.2164 20.5018C35.2184 20.659 35.2822 20.8092 35.3941 20.9197C35.506 21.0302 35.657 21.0922 35.8143 21.0922C35.9715 21.0922 36.1225 21.0302 36.2344 20.9197C36.3463 20.8092 36.4101 20.659 36.4121 20.5018C36.4057 18.0201 35.6855 15.5927 34.3374 13.5091C32.9894 11.4256 31.0704 9.77377 28.8094 8.75084ZM11.2331 21.0991C11.3115 21.0991 11.3892 21.0836 11.4616 21.0536C11.534 21.0236 11.5998 20.9796 11.6553 20.9241C11.7107 20.8686 11.7546 20.8028 11.7846 20.7303C11.8145 20.6578 11.8299 20.5802 11.8298 20.5018C11.8359 18.25 12.4898 16.0475 13.7132 14.1572C14.9367 12.2668 16.6782 10.7683 18.73 9.84047C18.8726 9.77399 18.9832 9.65396 19.0378 9.50644C19.0925 9.35891 19.0868 9.19578 19.0219 9.05246C18.957 8.90913 18.8383 8.79716 18.6914 8.74085C18.5445 8.68454 18.3813 8.68843 18.2372 8.75167C15.9762 9.77431 14.0571 11.4259 12.7091 13.5094C11.361 15.5928 10.6409 18.0201 10.6346 20.5017C10.6346 20.5802 10.6501 20.6579 10.6802 20.7304C10.7103 20.803 10.7544 20.8688 10.8099 20.9243C10.8655 20.9798 10.9314 21.0238 11.004 21.0537C11.0766 21.0837 11.1543 21.0991 11.2328 21.099L11.2331 21.0991ZM22.2678 10.5785C22.2677 10.8268 22.3412 11.0696 22.4791 11.2761C22.617 11.4827 22.813 11.6437 23.0423 11.7388C23.2717 11.8339 23.5241 11.8589 23.7677 11.8105C24.0113 11.7622 24.235 11.6427 24.4107 11.4672C24.5863 11.2916 24.706 11.068 24.7545 10.8244C24.803 10.5809 24.7782 10.3284 24.6832 10.099C24.5882 9.86957 24.4274 9.67345 24.2209 9.53545C24.0145 9.39746 23.7718 9.32378 23.5234 9.32375C23.1908 9.32445 22.872 9.45685 22.6367 9.69199C22.4014 9.92713 22.2688 10.2459 22.2678 10.5785ZM12.6831 33.7159H34.3625C34.5169 33.7157 34.6682 33.6729 34.7997 33.5922C34.9313 33.5114 35.0379 33.3959 35.108 33.2584C35.178 33.1208 35.2087 32.9666 35.1966 32.8128C35.1845 32.6589 35.1301 32.5113 35.0394 32.3864L31.5952 27.6497C31.521 27.5475 31.481 27.4244 31.4811 27.298V20.5018C31.4847 19.4545 31.2815 18.4168 30.8832 17.4482C30.4848 16.4796 29.8993 15.5992 29.16 14.8574C28.4207 14.1156 27.5422 13.527 26.575 13.1254C25.6078 12.7238 24.5708 12.517 23.5235 12.517C22.4762 12.517 21.4392 12.7238 20.472 13.1254C19.5047 13.527 18.6263 14.1156 17.887 14.8574C17.1477 15.5992 16.5621 16.4796 16.1638 17.4482C15.7655 18.4168 15.5623 19.4545 15.5658 20.5018V27.298C15.5656 27.4244 15.5256 27.5475 15.4513 27.6497L12.0067 32.3864C11.9159 32.5113 11.8614 32.6588 11.8492 32.8127C11.837 32.9666 11.8676 33.1209 11.9376 33.2585C12.0076 33.3961 12.1143 33.5116 12.2459 33.5924C12.3774 33.6732 12.5288 33.716 12.6831 33.7161V33.7159ZM23.5234 13.8592C23.3661 13.8612 23.2159 13.9251 23.1053 14.037C22.9948 14.1489 22.9328 14.2999 22.9328 14.4573C22.9328 14.6146 22.9948 14.7656 23.1053 14.8775C23.2159 14.9895 23.3661 15.0533 23.5234 15.0553C24.9674 15.0569 26.3518 15.6313 27.3729 16.6523C28.3939 17.6734 28.9683 19.0578 28.9699 20.5018C28.9719 20.6591 29.0357 20.8093 29.1477 20.9199C29.2596 21.0304 29.4106 21.0924 29.5679 21.0924C29.7253 21.0924 29.8763 21.0304 29.9882 20.9199C30.1001 20.8093 30.164 20.6591 30.166 20.5018C30.1595 18.7421 29.4576 17.0563 28.2132 15.812C26.9689 14.5676 25.2831 13.8657 23.5234 13.8592ZM26.8476 34.9108H20.1989C20.1976 34.9476 20.1964 34.9849 20.1964 35.0222C20.1964 35.9046 20.547 36.7508 21.1709 37.3747C21.7948 37.9987 22.6411 38.3492 23.5234 38.3492C24.4058 38.3492 25.252 37.9987 25.876 37.3747C26.4999 36.7508 26.8504 35.9046 26.8504 35.0222C26.8504 34.9851 26.8492 34.9476 26.8476 34.9108Z' fill='%234CAF50'/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id='clip0_347_21611'%3E%3Crect width='47' height='47' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E%0A"
            alt=""
          />
          Покупатель отметил данный ордер, как оплаченный, проверьте оплату и измените статус ордера
          !
        </Stack>
      )}
      <P2PEditForm current={transaction} update={mutate} />
    </Container>
  );
};

export default P2PEditView;
